trigger: 
- main

pool: 
   vmImage: windows

jobs:
- deployment: hugo
  displayName: Deploy to VM
  environment: 
   name: ranorex
   resourceType: VirtualMachine
  strategy:
     runOnce:
        deploy:   
          steps:
            - script: echo "Hello world"
            - task: CmdLine@2
              inputs:
                script: |
                  echo Write your commands here
                  
                  echo Hello world

            - task: PowerShell@2
              inputs:
               targetType: 'inline'
               script: |
                # Write your PowerShell commands here.
                
                Write-Host "Hello World"
                Get-ChildItem -Path C:\WindowsAzure\Logs
                # Predefined Variables
                $adSdkUrl = "https://storagename.blob.core.windows.net/prelabelcont/RanorexRemoteAgent-7.3.0.msi"
                $adSdkPath = "C:\Users\hugo"
                
 
                # Download the files to local temp folder
                Write-Output "downloading $adSdkUrl…"
                Invoke-WebRequest -Uri $adSdkUrl -OutFile $adSDKPath
                # Install the SDKs (use the "qn" flag to install silently)
                Write-Output "installing $adSdkPath…"
                Start-Process $adSdkPath -ArgumentList "/q" -Wait
                Write-Output "done"
                


                  
                


